# US-V1-02.1 : Export CSV

| Métadonnée | Valeur |
|------------|--------|
| **ID** | US-V1-02.1 |
| **Epic** | E-V1-02 : Export |
| **Milestone** | V1.0 |
| **Priorité** | P0 |
| **PRD** | [prd-faatere-v1.md](../../prd-faatere-v1.md) |

---

## User Story

**En tant que** gestionnaire,
**Je veux** exporter les adhérents en CSV,
**Afin de** les traiter dans un tableur.

---

## Critères d'acceptance

- [ ] Endpoint GET /members/export/csv
- [ ] Paramètres : tomiteId (optionnel pour Bureau), excludeNoEmail, excludeNoPhone
- [ ] Colonnes : nom, prénom, email, téléphone, adresse, numéro, tomité, statut paiement
- [ ] Encoding UTF-8 avec BOM pour Excel
- [ ] Permission : Bureau (global), autres (leur tomité)

---

## Format du fichier

```csv
Numéro,Nom,Prénom,Email,Téléphone,Adresse,Tomité,Payé,Méthode
PPT-2026-00001,Tetuanui,Moana,moana@email.pf,+689 87 12 34 56,123 Rue Pomare,Papeete,Oui,Espèces
```

---

## Tâches techniques

### Backend

- [ ] Créer endpoint export/csv
- [ ] Implémenter génération CSV avec stream
- [ ] Ajouter BOM UTF-8 pour Excel
- [ ] Appliquer les filtres
- [ ] Respecter le cloisonnement
- [ ] Headers : Content-Type: text/csv, Content-Disposition: attachment

### Frontend

- [ ] Bouton "Exporter CSV" sur la page des adhérents
- [ ] Téléchargement automatique

---

## Dépendances

- US-MVP-04.4 : Lister les adhérents

---

## Notes

Le BOM UTF-8 (\\uFEFF) est nécessaire pour que Excel reconnaisse correctement l'encodage.
