# US-V1-04.2 : Consultation logs d'audit

| MÃ©tadonnÃ©e | Valeur |
|------------|--------|
| **ID** | US-V1-04.2 |
| **Epic** | E-V1-04 : Audit |
| **Milestone** | V1.0 |
| **PrioritÃ©** | P1 |
| **PRD** | [prd-faatere-v1.md](../../prd-faatere-v1.md) |

---

## User Story

**En tant que** PrÃ©sident de tomitÃ© ou Bureau,
**Je veux** consulter l'historique des modifications,
**Afin de** savoir qui a fait quoi.

---

## CritÃ¨res d'acceptance

- [ ] Endpoint GET /audit-logs
- [ ] ParamÃ¨tres : tomiteId, memberId, page, limit
- [ ] Bureau : tous les logs
- [ ] PrÃ©sident : logs de son tomitÃ©
- [ ] SecrÃ©taire : pas d'accÃ¨s

### Frontend

- [ ] Page /audit ou onglet sur page adhÃ©rent
- [ ] Liste chronologique inversÃ©e
- [ ] DÃ©tail des changements (diff)
- [ ] Filtres par pÃ©riode, action, utilisateur

---

## Interface de consultation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Historique des modifications                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Filtres: [PÃ©riode â–¼] [Action â–¼] [Utilisateur â–¼]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚ 03/02/2026 14:32 - Jean Dupont (SecrÃ©taire)              â”‚
â”‚ âœï¸ Modification de Moana Tetuanui                         â”‚
â”‚    phone: +689 87 12 34 56 â†’ +689 87 65 43 21            â”‚
â”‚                                                          â”‚
â”‚ 03/02/2026 14:15 - Marie Martin (Bureau)                 â”‚
â”‚ â• CrÃ©ation de Hina Teriitahi                            â”‚
â”‚    TomitÃ©: Papeete                                       â”‚
â”‚                                                          â”‚
â”‚ 02/02/2026 10:45 - Jean Dupont (SecrÃ©taire)              â”‚
â”‚ ğŸ”„ Transfert de Teva Manuia                              â”‚
â”‚    Faa'a â†’ Papeete                                       â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## TÃ¢ches techniques

### Backend

- [ ] CrÃ©er endpoint GET /audit-logs
- [ ] ImplÃ©menter filtres et pagination
- [ ] VÃ©rifier les permissions
- [ ] Joindre les infos utilisateur et membre

### Frontend

- [ ] CrÃ©er page /audit
- [ ] CrÃ©er composant AuditLogList
- [ ] CrÃ©er composant AuditLogEntry avec diff
- [ ] ImplÃ©menter les filtres
- [ ] Ajouter onglet "Historique" sur la fiche adhÃ©rent

---

## DÃ©pendances

- US-V1-04.1 : Logging des mutations

---

## Notes

L'affichage du diff (avant/aprÃ¨s) aide Ã  comprendre rapidement ce qui a changÃ©.
